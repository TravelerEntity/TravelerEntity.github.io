

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="LinYun">
  <meta name="keywords" content="">
  
    <meta name="description" content="一、SpringBoot入门1.spring boot简介spring boot的特点  boot整合了spring的各种技术栈，比如security、cloud等 boot简化spring的配置文件 项目可以以jar包的形式运行，而不是war boot是spring框架的框架  2.微服务由martin fowler的一篇文章而来。微服务是一种应用架构风格。传统的单体应用，应用的所有功能都装在一">
<meta property="og:type" content="article">
<meta property="og:title" content="springboot-尚硅谷">
<meta property="og:url" content="https://travelerentity.github.io/2021/12/springboot-%E5%B0%9A%E7%A1%85%E8%B0%B7/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="一、SpringBoot入门1.spring boot简介spring boot的特点  boot整合了spring的各种技术栈，比如security、cloud等 boot简化spring的配置文件 项目可以以jar包的形式运行，而不是war boot是spring框架的框架  2.微服务由martin fowler的一篇文章而来。微服务是一种应用架构风格。传统的单体应用，应用的所有功能都装在一">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://travelerentity.github.io/images/2021S4/springboot-micro.jpeg">
<meta property="article:published_time" content="2021-11-29T01:18:40.000Z">
<meta property="article:modified_time" content="2021-12-22T03:58:51.043Z">
<meta property="article:author" content="LinYun">
<meta property="article:tag" content="后端">
<meta property="article:tag" content="框架">
<meta property="article:tag" content="springboot">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://travelerentity.github.io/images/2021S4/springboot-micro.jpeg">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>springboot-尚硅谷 - Hexo</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"travelerentity.github.io","root":"/","version":"1.9.5-a","typing":{"enable":true,"typeSpeed":60,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"gtag":null},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>LinYun</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/images/2021S4/springboot-micro.jpeg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="springboot-尚硅谷"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2021-11-29 09:18" pubdate>
          2021年11月29日 上午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          <!-- compatible with older versions-->
          24k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          <!-- compatible with older versions-->
          198 分钟
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">springboot-尚硅谷</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="一、SpringBoot入门"><a href="#一、SpringBoot入门" class="headerlink" title="一、SpringBoot入门"></a>一、SpringBoot入门</h1><h2 id="1-spring-boot简介"><a href="#1-spring-boot简介" class="headerlink" title="1.spring boot简介"></a>1.spring boot简介</h2><p>spring boot的特点</p>
<ol>
<li>boot整合了spring的各种技术栈，比如security、cloud等</li>
<li>boot简化spring的配置文件</li>
<li>项目可以以jar包的形式运行，而不是war</li>
<li>boot是spring框架的框架</li>
</ol>
<h2 id="2-微服务"><a href="#2-微服务" class="headerlink" title="2.微服务"></a>2.微服务</h2><p>由martin fowler的一篇文章而来。微服务是一种应用架构风格。传统的单体应用，应用的所有功能都装在一个应用里，当整个项目十分庞大以后，不利于应用的扩展。<strong>所以将整个应用按照功能进行拆分，这就是微服务。</strong> 拆分后，就可以对应用的功能进行单独升级和替换。</p>
<p><strong>总之，这些调整的一切目的几乎都是为了减少大型项目的复杂度，通过分工合作的方式提高效率。</strong></p>
<h2 id="3-环境配置"><a href="#3-环境配置" class="headerlink" title="3.环境配置"></a>3.环境配置</h2><h3 id="初始环境"><a href="#初始环境" class="headerlink" title="初始环境"></a>初始环境</h3><ul>
<li>jdk1.8+</li>
<li>maven3.3+</li>
<li>idea2017+</li>
<li>spring-boot1.5.9Release</li>
</ul>
<h3 id="maven配置"><a href="#maven配置" class="headerlink" title="maven配置"></a>maven配置</h3><p>在maven的config文件中加上这段</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>jdk-1.8<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br><br>      <span class="hljs-tag">&lt;<span class="hljs-name">activation</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">activeByDefault</span>&gt;</span>true<span class="hljs-tag">&lt;<span class="hljs-name">activeByDefault</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">jdk</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">jdk</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">activation</span>&gt;</span><br><br>      <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.compilerVersion</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.compilerVersion</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h3 id="idea配置"><a href="#idea配置" class="headerlink" title="idea配置"></a>idea配置</h3><p>把idea自带的maven替换为我们自己安装的maven，路径为：<code>settings/buildtools/maven</code></p>
<h2 id="4-spring-boot-hello-world"><a href="#4-spring-boot-hello-world" class="headerlink" title="4. spring-boot hello world"></a>4. spring-boot hello world</h2><p>spring boot的hello world步骤：</p>
<h4 id="4-1创建maven项目，不使用模板"><a href="#4-1创建maven项目，不使用模板" class="headerlink" title="4.1创建maven项目，不使用模板"></a>4.1创建maven项目，不使用模板</h4><h4 id="4-2添加spring-boot依赖"><a href="#4-2添加spring-boot依赖" class="headerlink" title="4.2添加spring boot依赖"></a>4.2添加spring boot依赖</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.5.9.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p>这里出现了一个问题，一开始给maven配置编译的jkd时一个标签的结束符号忘记打了，所以就导致pom一直爆红。后面查看具体错误报告时才发现问题所在，所以以后要仔细检查错误报告。</p>
<h4 id="4-3编写代码"><a href="#4-3编写代码" class="headerlink" title="4.3编写代码"></a>4.3编写代码</h4><h5 id="4-3-1创建spring-boot-主类"><a href="#4-3-1创建spring-boot-主类" class="headerlink" title="4.3.1创建spring boot 主类"></a>4.3.1创建spring boot 主类</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloWorldMainApplication</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//启动代码</span><br>        SpringApplication.run(HelloWorldMainApplication.class,args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h5 id="4-3-2创建controller类"><a href="#4-3-2创建controller类" class="headerlink" title="4.3.2创建controller类"></a>4.3.2创建controller类</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloController</span> &#123;<br>    <span class="hljs-meta">@ResponseBody</span><br>    <span class="hljs-meta">@RequestMapping(&quot;/hello&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">hello</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Hello World!-------------We live in a world.&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h4 id="4-4-运行spring-boot主类，就是HelloWorldMainApplication类"><a href="#4-4-运行spring-boot主类，就是HelloWorldMainApplication类" class="headerlink" title="4.4 运行spring boot主类，就是HelloWorldMainApplication类"></a>4.4 运行spring boot主类，就是HelloWorldMainApplication类</h4><h4 id="4-5-简化部署"><a href="#4-5-简化部署" class="headerlink" title="4.5 简化部署"></a>4.5 简化部署</h4><p>通过把项目打成jar包的形式简化部署的流程，jar包内置tomcat，意味着即使服务器没有tomcat也可以运行项目。</p>
<p>添加插件的依赖后即可打jar包。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- 这个插件，可以将应用打包成一个可执行的jar包；--&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>           <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br></code></pre></td></tr></table></figure>
<ol>
<li>使用<code>maven package</code>命令进行打包</li>
<li>打好的包在target中</li>
<li>使用<code>java -jar</code>运行jar包</li>
</ol>
<h2 id="5-Hello-world的细节"><a href="#5-Hello-world的细节" class="headerlink" title="5.Hello world的细节"></a>5.Hello world的细节</h2><p>spring boot为我们简化了很多操作，这正是通过我们一开始导入的两个依赖完成的。</p>
<h3 id="5-1-boot-starter依赖"><a href="#5-1-boot-starter依赖" class="headerlink" title="5.1 boot-starter依赖"></a>5.1 boot-starter依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.5.9.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p>spring boot 的版本中心，里面有常用依赖的版本号。有了它可以少些一部分的版本号。</p>
<h3 id="5-2-boot-starter-xxx依赖"><a href="#5-2-boot-starter-xxx依赖" class="headerlink" title="5.2 boot-starter-xxx依赖"></a>5.2 boot-starter-xxx依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 集成了spring web开发的常用依赖 --&gt;</span><br></code></pre></td></tr></table></figure>
<p>springboot 把一个个功能场景拆开，分成starter的形式。我们需要用什么功能就写相应的依赖，一切都会自动进行。除了<code>boot-starter-web</code>，还有比如<code>boot-starter-security</code></p>
<h3 id="5-3-SpringBootApplication"><a href="#5-3-SpringBootApplication" class="headerlink" title="5.3 @SpringBootApplication"></a>5.3 @SpringBootApplication</h3><p>这个注解里面也是一些额外注解（组合注解），算是为了简化注解的标注，把里面的注解都整合成一个<code>@SpringBootApplication</code>注解。<br>它就代表一个springboot应用。</p>
<p><code>@EnableAutoConfiguration/@AutoConfigurationPackage</code>用来自动开启包扫描，它会自动扫面启动类下面的包(controller)。</p>
<p>自动配置注解的<code>@EnableAutoConfiguration</code>目的就是为了给我们的springboot程序导配置文件，导包，开包扫描，它内置了各种组件的注解，都是为了减少我们的操作步骤。</p>
<p><code>@SpringBootConfiguration</code>，标识这是一个<code>springboot</code>的配置类，里面则是一个<code>@Configuration</code>注解，表示一个spring的注解。</p>
<h2 id="6-springboot-initializer"><a href="#6-springboot-initializer" class="headerlink" title="6 springboot-initializer"></a>6 springboot-initializer</h2><p>idea中继承了一个initializer可以帮助我们快速构建一个springboot项目。</p>
<p>构建完成后的项目包括</p>
<ul>
<li>启动类</li>
<li>resource文件夹<ul>
<li>template静态网页模板（由于内置tomcat，springboot不支持jsp）</li>
<li>static静态资源文件夹</li>
</ul>
</li>
<li>application.properties：spring的配置文件</li>
</ul>
<h1 id="二、yaml语法与配置文件"><a href="#二、yaml语法与配置文件" class="headerlink" title="二、yaml语法与配置文件"></a>二、yaml语法与配置文件</h1><h2 id="1-yaml是什么"><a href="#1-yaml是什么" class="headerlink" title="1.yaml是什么"></a>1.yaml是什么</h2><p>yaml是一种比xml更优秀的用来表示数据的文件类型。对比：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8081</span><br></code></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">server</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">port</span>&gt;</span>8081<span class="hljs-tag">&lt;/<span class="hljs-name">port</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">server</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p>相比之下，xml将大部分字符放在了开始和结束标签上，浪费了相当多的存储空间。yaml不仅更简洁，结构也更清晰。</p>
<h2 id="2-yaml怎么写"><a href="#2-yaml怎么写" class="headerlink" title="2.yaml怎么写"></a>2.yaml怎么写</h2><ul>
<li>yaml的语法规则区分大小写</li>
<li>yaml数据的层级关系通过缩进来区分  <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># k: v 对前需要加空格，否则无法识别</span><br><span class="hljs-attr">server:</span><br>    <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span><br><span class="hljs-attr">name:</span> <span class="hljs-string">YiAn</span><br><span class="hljs-comment"># yaml中，字符串不需要被单双引号引上，单双引号的使用具有其他意义</span><br><span class="hljs-comment"># 单引号表示忽略特殊字符，原样输出。比如：hello \n world 会被原样输出为：hello \n world</span><br><span class="hljs-comment"># 双引号会转义特殊字符，比如：hello \n world 输出为： hello 换行符 world </span><br></code></pre></td></tr></table></figure></li>
<li>yaml中特殊数据语法基本不变，通过层级体现  <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># 对象语法</span><br><span class="hljs-attr">person:</span><br>  <span class="hljs-string">name:zhangsan</span><br>  <span class="hljs-string">gender:man</span><br><span class="hljs-comment">#或者</span><br>&#123;<span class="hljs-string">name:zhangsan</span>,<span class="hljs-string">gender:man</span>&#125;<br><span class="hljs-comment"># 集合语法</span><br><span class="hljs-attr">fruits:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">apple</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">pear</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">buleberry</span><br><span class="hljs-comment">#或者</span><br>[<span class="hljs-string">apple</span>,<span class="hljs-string">pear</span>,<span class="hljs-string">buleberry</span>] <br></code></pre></td></tr></table></figure></li>
</ul>
<h2 id="3-获取配置文件的值"><a href="#3-获取配置文件的值" class="headerlink" title="3.获取配置文件的值"></a>3.获取配置文件的值</h2><ol>
<li>使用bean来获取yaml的值，先写一个实体类 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 标识类为组件，只有组件才能使用容器中的功能，比如下面的注解生效</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-comment">// 表示类为属性配置类，prefix 表示要读取的前缀。</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;person&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>    String name;<br>    Integer age;<br>    Map&lt;String,Object&gt; map;<br>    String[] array;<br>    Dog dog;<br>    <span class="hljs-comment">// getters and setters...</span><br>&#125;<br></code></pre></td></tr></table></figure></li>
<li>添加配置文件处理器的依赖 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--导入配置文件处理器，配置文件进行绑定就会有提示--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></li>
<li>编写测试类 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//导包的时候一定要到junit.test的包；而不是jupiter</span><br><span class="hljs-keyword">import</span> org.junit.Test;<br><span class="hljs-meta">@RunWith(SpringRunner.class)</span><br><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloWorldMainApplicationTests</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> Server person;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextLoads</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(person);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<strong>这种方式也可以直接适用于读取properties文件</strong></li>
</ol>
<h2 id="4-Value注解和-ConfigurationProperties注解"><a href="#4-Value注解和-ConfigurationProperties注解" class="headerlink" title="4.@Value注解和@ConfigurationProperties注解"></a>4.@Value注解和@ConfigurationProperties注解</h2><p>@Value注解用于给单个属性注入值，而@ConfigurationProperties用来给整个类的属性注入。</p>
<p><strong>@Value特性：</strong></p>
<ul>
<li>单个注入属性</li>
<li>语法严格</li>
<li>支持spring表达式</li>
<li>不支持jsr303数据校验</li>
<li>不支持复杂数据（对象类型）封装</li>
</ul>
<p><strong>@ConfigurationProperties特性</strong></p>
<ul>
<li>给整个bean批量注入属性</li>
<li>语法松散，比如支持 <code>person.lastName == person.last-name</code></li>
<li>不支持spring表达式</li>
<li>支持303数据校验</li>
<li>支持对象封装</li>
</ul>
<h3 id="4-1-Value的补充知识"><a href="#4-1-Value的补充知识" class="headerlink" title="4.1@Value的补充知识"></a>4.1@Value的补充知识</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//@Value是spring的注释，用于给属性注入值</span><br><span class="hljs-comment">// 直接从配置文件中读取值</span><br><span class="hljs-meta">@Value(&quot;$&#123;person.name&#125;&quot;)</span><span class="hljs-comment">//从配置文件中读取</span><br><span class="hljs-keyword">private</span> String name;<br><br><span class="hljs-comment">// spring表达式，除了读取值还能计算</span><br><span class="hljs-meta">@Value(&quot;#&#123;user.username&#125;&quot;)</span><span class="hljs-comment">//从user类中读取</span><br><span class="hljs-meta">@Value(&quot;#&#123;11 * 11&#125;&quot;)</span><span class="hljs-comment">//计算值 121</span><br><span class="hljs-keyword">private</span> Integer product;<br><br><span class="hljs-comment">// 直接注入值</span><br><span class="hljs-meta">@Value(&quot;&#123;测试值&#125;&quot;)</span><br><span class="hljs-keyword">private</span> String testValue;<br></code></pre></td></tr></table></figure>
<h2 id="5-PropertySource-amp-ImportResource-amp-Bean三个注解"><a href="#5-PropertySource-amp-ImportResource-amp-Bean三个注解" class="headerlink" title="5.@PropertySource&amp;@ImportResource&amp;@Bean三个注解"></a>5.@PropertySource&amp;@ImportResource&amp;@Bean三个注解</h2><h3 id="5-1-PropertySource注解"><a href="#5-1-PropertySource注解" class="headerlink" title="5.1@PropertySource注解"></a>5.1@PropertySource注解</h3><p>因为一个项目一般需要多个配置文件，所以可以在类上再加上一个@PropertySource注解来指定导入某个配置文件。<strong>它只支持properties文件，不支持yaml文件。</strong></p>
<h3 id="5-2-Bean注解（Recommand）"><a href="#5-2-Bean注解（Recommand）" class="headerlink" title="5.2@Bean注解（Recommand）"></a>5.2@Bean注解（Recommand）</h3><p>springboot推荐使用@Bean注解进行组件注入</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAppConfig</span> &#123;<br>    <span class="hljs-comment">// 标注在方法上，方法名就是组件id</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> TestConfig <span class="hljs-title function_">testConfig</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">// 返回组件类</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestConfig</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="5-3-ImportResource注解-Deprecated"><a href="#5-3-ImportResource注解-Deprecated" class="headerlink" title="5.3@ImportResource注解(Deprecated)"></a>5.3@ImportResource注解(Deprecated)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//用于导入Spring的配置文件让其生效</span><br><span class="hljs-meta">@ImportResource(locations = &#123;&quot;classpath:beans.xml&quot;&#125;)</span><br></code></pre></td></tr></table></figure>

<h2 id="6-配置文件的占位符"><a href="#6-配置文件的占位符" class="headerlink" title="6.配置文件的占位符"></a>6.配置文件的占位符</h2><p>无论是yaml还是Properties都可以使用占位符。</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">car.mode</span> = <span class="hljs-string">AudiA6</span><br><span class="hljs-attr">car.engine</span> = <span class="hljs-string">X-4</span><br><span class="hljs-comment"># 使用随机id</span><br><span class="hljs-attr">car.cid</span> = <span class="hljs-string">$&#123;random.uuid&#125;</span><br><span class="hljs-comment"># 使用随机的int数</span><br><span class="hljs-attr">car.cnum</span> = <span class="hljs-string">$&#123;random.int&#125;</span><br><span class="hljs-comment"># 引用之前的值，冒号之后是默认值</span><br><span class="hljs-attr">car.price</span> = <span class="hljs-string">1230,000RMB$&#123;car.mode:BMW X5&#125;</span><br></code></pre></td></tr></table></figure>

<h2 id="7-多配置文件的使用"><a href="#7-多配置文件的使用" class="headerlink" title="7. 多配置文件的使用"></a>7. 多配置文件的使用</h2><p>一个项目不止一个配置文件，开发环境一种配置，生产环境一种配置。所以需要学习多配置文件的使用。</p>
<h3 id="7-1properties多配置文件"><a href="#7-1properties多配置文件" class="headerlink" title="7.1properties多配置文件"></a>7.1properties多配置文件</h3><p>程序主配置文件是<code>application.properties</code>，其它环境的配置文件可以是<code>application-dev.properties</code>，通过短横杠区分不同的配置环境。最后通过<code>spring.profiles.active=dev</code>激活具体的配置文件</p>
<h3 id="72-yaml多配置文件"><a href="#72-yaml多配置文件" class="headerlink" title="72.yaml多配置文件"></a>72.yaml多配置文件</h3><p>yaml在一个配置文件内就可以区别多种环境</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment">#主配置</span><br><span class="hljs-comment">#激活开发环境的配置</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">profiles:</span><br>    <span class="hljs-attr">active:</span> <span class="hljs-string">dev</span><br><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8009</span><br><span class="hljs-meta">---</span><br><span class="hljs-comment">#开发环境配置</span><br><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8008</span><br>  <span class="hljs-comment">#标识环境名</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">profiles:</span> <span class="hljs-string">dev</span><br><span class="hljs-meta">---</span><br><span class="hljs-comment">#生产环境配置</span><br><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8010</span><br>  <span class="hljs-comment">#标识环境名</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">profiles:</span> <span class="hljs-string">product</span><br></code></pre></td></tr></table></figure>
<p>除了在yaml中的标识激活哪个配置，还可以通过传入启动参数的方选择激活。在idea中配置parameter<code>spring.profiles.active</code>，或者命令行传入<code>spring.profiles.active=dev</code></p>
<h2 id="8-配置文件优先级"><a href="#8-配置文件优先级" class="headerlink" title="8.配置文件优先级"></a>8.配置文件优先级</h2><p>springboot 启动会扫描以下位置的application.properties或者application.yml文件作为Spring boot的默认配置文件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- file是项目路径。项目路径下config下的applicaiton配置文件具有最高优先级 --&gt;</span><br>–file:../config/application.yaml<br><br>–file:../application.yaml<br><br>–classpath:/config/application.yaml<br><br>–classpath:/application.yaml<br></code></pre></td></tr></table></figure>
<p>高优先级会覆盖低优先级的文件。如果合理使用，高低优先级配置文件还可以实现<strong>互补配置</strong>的效果，<strong>即低优先级补充配置高优先级中没有配置的文件</strong>。</p>
<p>此外，也可以强制指定外部路径为配置文件，还是通过在启动时添加参数的方式。</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmd">java -jar springboot-project --spring.config.location=D:/application.properties<br></code></pre></td></tr></table></figure>

<p>不过，即使是在低优先级的yaml文件中指定参数<code>spring.profiles.active=dev</code>或者命令行传入参数<code>spring.profiles.active=dev</code>，都能覆盖掉高优先级文件的配置。</p>
<h2 id="9-加载外部的配置文件"><a href="#9-加载外部的配置文件" class="headerlink" title="9.加载外部的配置文件"></a>9.加载外部的配置文件</h2><p>项目打好包之后如果想临时更改某些配置参数，可以直接在命令号中传入具体参数名。比如临时修改端口号 <code>java -jar springboot-helloworld.jar --server.port=8290</code>，这种优先级最高。类似<code>!impotant</code>。</p>
<p>对于打好包的项目，如果参数有很多的话，也可以直接在jar包的同级目录放一个application配置文件。<br><strong>btw，.properties文件总是比.yml文件拥有更高的优先级</strong>，如果同级目录下既有一个properties又有yml，那么前者生效。</p>
<h2 id="10-自动配置的原理"><a href="#10-自动配置的原理" class="headerlink" title="10.自动配置的原理"></a>10.自动配置的原理</h2><p>springboot帮我们完成了大量的配置工作，我们也可以按照需要手动配置某些值</p>
<blockquote>
<p>引用笔记</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs ​">1）、SpringBoot启动会加载大量的自动配置类<br><br>​2）、我们看我们需要的功能有没有SpringBoot默认写好的自动配置类；<br><br>​3）、（如果有）我们再来看这个自动配置类中到底配置了哪些组件；（只要我们要用的组件有，我们就不需要再来配置了）<br><br>​4）、给容器中自动配置类添加组件的时候，会从properties类中获取某些属性。我们就可以在配置文件中指定这些属性的值；<br><br>xxxxAutoConfigurartion：自动配置类；<br><br>给容器中添加组件<br><br>xxxxProperties:封装配置文件中相关属性；<br></code></pre></td></tr></table></figure>

<h3 id="10-1-Conditional注解"><a href="#10-1-Conditional注解" class="headerlink" title="10.1 @Conditional注解"></a>10.1 @Conditional注解</h3><p>springboot有许多<code>@conditionalOnxxx</code>注解，用于条件成立的情况，使配置内容生效。<br>虽然springboot内置了大量的自动配置类，但并不是全都会生效。我们可以通过在配置文件中添加 <code>debug=on</code> 属性，开启springboot的debug模式，从而查看当前项目有哪些自动配置类生效了。</p>
<h1 id="三、日志系统"><a href="#三、日志系统" class="headerlink" title="三、日志系统"></a>三、日志系统</h1><p>目前的日志系统类似于JDBC和数据库驱动一样。现有一个日志接口层，然后再有不同的日志接口实现类。SpringBoot使用的日志接口是SLF4J，接口实现是Logback。</p>
<h3 id="1-日志的使用"><a href="#1-日志的使用" class="headerlink" title="1 日志的使用"></a>1 日志的使用</h3><p>和JDBC类似，使用日志使掉的是接口层的方法，不需要去关心实现层是什么样的方法。实际使用时，调用SEL4J的方法就行，尽管它有多种的实现层。</p>
<h3 id="2-日志配置文件"><a href="#2-日志配置文件" class="headerlink" title="2. 日志配置文件"></a>2. 日志配置文件</h3><p>日志的配置文件还是依据实现类的不同来完成。毕竟sel4j只是提供一个抽象方法给我们调用。</p>
<h3 id="3-统一日志系统"><a href="#3-统一日志系统" class="headerlink" title="3. 统一日志系统"></a>3. 统一日志系统</h3><p>一个项目中可能涉及多个框架，而不同的框架使用的是不同的日志接口。我们需要统一日志接口。</p>
<p>以slf4j为例：</p>
<ul>
<li>系统框架中的其它日志系统排除</li>
<li>用中间包替换原有的日志框架，中间包是一个类似于原有框架，但实际上是转向slf4j的一个包</li>
<li>导入slf4j的实现类</li>
</ul>
<h3 id="4-SpringBoot的日志关系"><a href="#4-SpringBoot的日志关系" class="headerlink" title="4. SpringBoot的日志关系"></a>4. SpringBoot的日志关系</h3><p>通过查看springboot项目的依赖关系图，我们确认了springboot使用的是slf4j作用日志接口，logback作为日志实现；同时，springboot还通过日志转换包，把其它日志系统转为slf4j，然后用logback实现。</p>
<blockquote>
<p>SpringBoot能自动适配所有的日志，而且底层使用slf4j+logback的方式记录日志，引入其他框架的时候，只需要把这个框架依赖的日志框架排除掉即可。</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 排除 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>commons-logging<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>commons-logging<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="5-springboot日志的使用和基本配置"><a href="#5-springboot日志的使用和基本配置" class="headerlink" title="5. springboot日志的使用和基本配置"></a>5. springboot日志的使用和基本配置</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 记住是导这个包</span><br><span class="hljs-keyword">import</span> org.slf4j.LoggerFactory;<br><br><span class="hljs-meta">@RunWith(SpringRunner.class)</span><br><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Springboot01HelloworldQuickApplicationTests</span> &#123;<br>    <span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span>  LoggerFactory.getLogger(getClass());<br>    <br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextLoads</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// 日志的默认输出级别，是info，所以是看不见trace和debug的输出的，但可以在配置文件中调整输出级别</span><br>        logger.trace(<span class="hljs-string">&quot;Trace 信息&quot;</span>);<br>        logger.debug(<span class="hljs-string">&quot;debug 信息&quot;</span>);<br>        logger.info(<span class="hljs-string">&quot;info 信息&quot;</span>);<br>        logger.warn(<span class="hljs-string">&quot;warn 信息&quot;</span>);<br>        logger.error(<span class="hljs-string">&quot;error 信息&quot;</span>);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-comment"># 调整日志级别</span><br><span class="hljs-attr">logging:</span><br>  <span class="hljs-attr">level:</span><br>    <span class="hljs-attr">com:</span><br>      <span class="hljs-attr">lee:</span> <span class="hljs-string">trace</span><br></code></pre></td></tr></table></figure>

<p><strong>除了配置日志的级别还可以调整日志的输出格式，输入到本地硬盘的某个位置。</strong></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment"># 不指定路径在当前项目下生成springboot.log日志</span><br><span class="hljs-comment"># 可以指定完整的路径；</span><br><span class="hljs-comment"># logging.file=G:/springboot.log</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># logging.path=指定日志文件的输出路径，日志文件名为spring.log</span><br><span class="hljs-comment"># 在当前磁盘的根路径下创建spring文件夹和里面的log文件夹；使用 spring.log 作为默认文件</span><br><span class="hljs-attr">logging.path</span>=<span class="hljs-string">/spring/log</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"></span><br><span class="hljs-comment">#  在控制台输出的日志的格式</span><br><span class="hljs-attr">logging.pattern.console</span>=<span class="hljs-string">%d&#123;yyyy-MM-dd&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n</span><br><span class="hljs-comment"># 指定文件中日志输出的格式</span><br><span class="hljs-attr">logging.pattern.file</span>=<span class="hljs-string">%d&#123;yyyy-MM-dd&#125; === [%thread] === %-5level === %logger&#123;50&#125; ==== %msg%n</span><br></code></pre></td></tr></table></figure>

<h3 id="6-配置日志By文件"><a href="#6-配置日志By文件" class="headerlink" title="6. 配置日志By文件"></a>6. 配置日志By文件</h3><p>日志系统会读取<code>org.springframework.boot.logging</code>包里的配置文件，我们也可以自己写一个类似的配置文件来进行覆盖。<br>有两种方式：</p>
<ol>
<li>logback.xml：这种方式会直接被日志系统识别并加载</li>
<li>logback-spring.xml：日志系统无法识别这种文件，是由springboot解析配置然后加载到日志系统中。这种方式可以使用springboot的高级功能，比如profile功能（环境选择，不同的环境不同的配置）</li>
</ol>
<h1 id="四、Web开发"><a href="#四、Web开发" class="headerlink" title="四、Web开发"></a>四、Web开发</h1><h2 id="4-1-简介"><a href="#4-1-简介" class="headerlink" title="4.1 简介"></a>4.1 简介</h2><p>使用springboot开发，idea中使用springboot initializer选择需要的场景模块，然后编写业务代码即可。配置文件部分springboot已经帮我们做了。</p>
<p>但在使用中我们也需要时常思考，这个场景springboot帮忙我们做了哪些配置，我们能不能修改，能不能进行扩展？</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">xxxxAutoConfiguration:</span> <span class="hljs-string">帮我们给容器中自动配置组件；</span><br><span class="hljs-attr">xxxxProperties:</span> <span class="hljs-string">配置类来封装配置文件的内容；</span><br></code></pre></td></tr></table></figure>

<h2 id="4-2-静态资源的映射"><a href="#4-2-静态资源的映射" class="headerlink" title="4.2 静态资源的映射"></a>4.2 静态资源的映射</h2><p><strong>先对路径做一下解释</strong><br><img src="/images/2021S4/QQ%E5%9B%BE%E7%89%8720211208170009.png" srcset="/img/loading.gif" lazyload alt="路径的具体对应"></p>
<h3 id="4-2-1-webjars引入资源"><a href="#4-2-1-webjars引入资源" class="headerlink" title="4.2.1 webjars引入资源"></a>4.2.1 webjars引入资源</h3><p>这种方式通过jar包的引入资源。比如我们要使用js，就直接在pom中写依赖导入js的webjars包，然后通过<code>localhost:8080/webjars/jquery/3.3.1/jquery.js</code>这种路径访问即可。</p>
<p><code>classpath:/META-INF/resources/webjars/</code>实际上是真实的路径，但springboot已经使用<code>/webjars</code>替换了。</p>
<p><a target="_blank" rel="noopener" href="http://www.webjars.org/">WebJars</a>查看各种jar的依赖。</p>
<h3 id="4-2-2-项目静态路径映射"><a href="#4-2-2-项目静态路径映射" class="headerlink" title="4.2.2 项目静态路径映射"></a>4.2.2 项目静态路径映射</h3><p>项目可以直接访问的文件目录，也就是说，用来放资源的目录。以下几个都是项目的静态资源根目录。</p>
<ul>
<li>“classpath:&#x2F;META-INF&#x2F;resources&#x2F;“, </li>
<li>“classpath:&#x2F;resources&#x2F;“,</li>
<li>“classpath:&#x2F;static&#x2F;“, </li>
<li>“classpath:&#x2F;public&#x2F;“ </li>
<li>“&#x2F;“：当前项目的根路径  <strong>重点！</strong></li>
</ul>
<p>这几种方式都支持引入资源，<strong>classpath为项目根目录，src和resource都是classpath</strong></p>
<h4 id="4-2-2-2-首页映射"><a href="#4-2-2-2-首页映射" class="headerlink" title="4.2.2.2 首页映射"></a>4.2.2.2 首页映射</h4><p>首页的映射路径是 <code>**/index</code></p>
<h4 id="4-2-2-3-网站图标映射"><a href="#4-2-2-3-网站图标映射" class="headerlink" title="4.2.2.3 网站图标映射"></a>4.2.2.3 网站图标映射</h4><p>图标的映射路径是 <code>**/favicon.ico</code></p>
<h4 id="4-2-3-更改项目静态路径"><a href="#4-2-3-更改项目静态路径" class="headerlink" title="4.2.3 更改项目静态路径"></a>4.2.3 更改项目静态路径</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment"># 可以一次性配置多个，这个变量是个数组</span><br><span class="hljs-attr">spring.resources.static-locations</span> = <span class="hljs-string">path1,path2</span><br></code></pre></td></tr></table></figure>

<h2 id="4-3-模板引擎"><a href="#4-3-模板引擎" class="headerlink" title="4.3 模板引擎"></a>4.3 模板引擎</h2><p>模板引擎用于显示动态数据，如图所示：<br><img src="/images/2021S4/Template-engine.png" srcset="/img/loading.gif" lazyload alt="模板引擎的工作"></p>
<p>jsp也是模板引擎的一种，SpringBoot推荐使用Thymeleaf模板引擎。</p>
<h3 id="4-3-1-引入thymeleaf"><a href="#4-3-1-引入thymeleaf" class="headerlink" title="4.3.1 引入thymeleaf"></a>4.3.1 引入thymeleaf</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 2.1.6 --&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- 切换thymeleaf版本，1.5.9的springboot配置的thymeleaf版本太老，我们要用新一点的 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">thymeleaf.version</span>&gt;</span>3.0.9.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">thymeleaf.version</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 布局功能的支持程序  thymeleaf3主程序  layout2以上版本 --&gt;</span><br>    <span class="hljs-comment">&lt;!-- thymeleaf2   layout1--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">thymeleaf-layout-dialect.version</span>&gt;</span>2.2.2<span class="hljs-tag">&lt;/<span class="hljs-name">thymeleaf-layout-dialect.version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="4-3-2-thymeleaf小demo"><a href="#4-3-2-thymeleaf小demo" class="headerlink" title="4.3.2 thymeleaf小demo"></a>4.3.2 thymeleaf小demo</h3><p><img src="/images/2021S4/thymeleaf-grammar.png" srcset="/img/loading.gif" lazyload alt="thymeleaf语法"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-comment">&lt;!--thymeleaf命名空间--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>FirstPage<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--text转义特殊字符，即直接原样输出值忽略特殊字符--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;hello&#125;&quot;</span>&gt;</span>默认值<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--不转义特殊字符，支持输出各种标签--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:utext</span>=<span class="hljs-string">&quot;$&#123;hello&#125;&quot;</span>&gt;</span>默认值<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--遍历，以及[[]]的语法（和text一样）--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">&quot;arr : $&#123;array&#125;&quot;</span>&gt;</span>[[$&#123;arr&#125;]]<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="4-3-2-1-thymeleaf表达式语法"><a href="#4-3-2-1-thymeleaf表达式语法" class="headerlink" title="4.3.2.1 thymeleaf表达式语法"></a>4.3.2.1 thymeleaf表达式语法</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">Simple</span> <span class="hljs-string">expressions:（表达式语法）</span><br><span class="hljs-attr">Variable</span> <span class="hljs-string">Expressions: $&#123;...&#125;：获取变量值；OGNL；</span><br>    <span class="hljs-attr">1）、获取对象的属性、调用方法</span><br>    <span class="hljs-attr">2）、使用内置的基本对象：</span><br><span class="hljs-comment">        #ctx : the context object.</span><br><span class="hljs-comment">        #vars: the context variables.</span><br><span class="hljs-comment">        #locale : the context locale.</span><br><span class="hljs-comment">        #request : (only in Web Contexts) the HttpServletRequest object.</span><br><span class="hljs-comment">        #response : (only in Web Contexts) the HttpServletResponse object.</span><br><span class="hljs-comment">        #session : (only in Web Contexts) the HttpSession object.</span><br><span class="hljs-comment">        #servletContext : (only in Web Contexts) the ServletContext object.</span><br>        <br>        <span class="hljs-attr">$&#123;session.foo&#125;</span><br>    <span class="hljs-attr">3）、内置的一些工具对象：</span><br><span class="hljs-comment">#execInfo : information about the template being processed.</span><br><span class="hljs-comment">#messages : methods for obtaining externalized messages inside variables expressions, in the same way as they would be obtained using #&#123;…&#125; syntax.</span><br><span class="hljs-comment">#uris : methods for escaping parts of URLs/URIs</span><br><span class="hljs-comment">#conversions : methods for executing the configured conversion service (if any).</span><br><span class="hljs-comment">#dates : methods for java.util.Date objects: formatting, component extraction, etc.</span><br><span class="hljs-comment">#calendars : analogous to #dates , but for java.util.Calendar objects.</span><br><span class="hljs-comment">#numbers : methods for formatting numeric objects.</span><br><span class="hljs-comment">#strings : methods for String objects: contains, startsWith, prepending/appending, etc.</span><br><span class="hljs-comment">#objects : methods for objects in general.</span><br><span class="hljs-comment">#bools : methods for boolean evaluation.</span><br><span class="hljs-comment">#arrays : methods for arrays.</span><br><span class="hljs-comment">#lists : methods for lists.</span><br><span class="hljs-comment">#sets : methods for sets.</span><br><span class="hljs-comment">#maps : methods for maps.</span><br><span class="hljs-comment">#aggregates : methods for creating aggregates on arrays or collections.</span><br><span class="hljs-comment">#ids : methods for dealing with id attributes that might be repeated (for example, as a result of an iteration).</span><br><br><span class="hljs-attr">Selection</span> <span class="hljs-string">Variable Expressions: *&#123;...&#125;：选择表达式：和$&#123;&#125;在功能上是一样；</span><br>    <span class="hljs-attr">补充：配合</span> <span class="hljs-string">th:object=&quot;$&#123;session.user&#125;：</span><br><span class="hljs-attr">&lt;div</span> <span class="hljs-string">th:object=&quot;$&#123;session.user&#125;&quot;&gt;</span><br><span class="hljs-attr">&lt;p&gt;Name</span>: <span class="hljs-string">&lt;span th:text=&quot;*&#123;firstName&#125;&quot;&gt;Sebastian&lt;/span&gt;.&lt;/p&gt;</span><br><span class="hljs-attr">&lt;p&gt;Surname</span>: <span class="hljs-string">&lt;span th:text=&quot;*&#123;lastName&#125;&quot;&gt;Pepper&lt;/span&gt;.&lt;/p&gt;</span><br><span class="hljs-attr">&lt;p&gt;Nationality</span>: <span class="hljs-string">&lt;span th:text=&quot;*&#123;nationality&#125;&quot;&gt;Saturn&lt;/span&gt;.&lt;/p&gt;</span><br><span class="hljs-attr">&lt;/div&gt;</span><br><br><span class="hljs-attr">Message</span> <span class="hljs-string">Expressions: #&#123;...&#125;：获取国际化内容</span><br><span class="hljs-attr">Link</span> <span class="hljs-string">URL Expressions: @&#123;...&#125;：定义URL；</span><br>        <span class="hljs-attr">@&#123;/order/process(execId</span>=<span class="hljs-string">$&#123;execId&#125;,execType=&#x27;FAST&#x27;)&#125;</span><br><span class="hljs-attr">Fragment</span> <span class="hljs-string">Expressions: ~&#123;...&#125;：片段引用表达式</span><br>        <span class="hljs-attr">&lt;div</span> <span class="hljs-string">th:insert=&quot;~&#123;commons :: main&#125;&quot;&gt;...&lt;/div&gt;</span><br>    		<br><span class="hljs-attr">Literals（字面量）</span><br>      <span class="hljs-attr">Text</span> <span class="hljs-string">literals: &#x27;one text&#x27; , &#x27;Another one!&#x27; ,…</span><br>      <span class="hljs-attr">Number</span> <span class="hljs-string">literals: 0 , 34 , 3.0 , 12.3 ,…</span><br>      <span class="hljs-attr">Boolean</span> <span class="hljs-string">literals: true , false</span><br>      <span class="hljs-attr">Null</span> <span class="hljs-string">literal: null</span><br>      <span class="hljs-attr">Literal</span> <span class="hljs-string">tokens: one , sometext , main ,…</span><br><span class="hljs-attr">Text</span> <span class="hljs-string">operations:（文本操作）</span><br>    <span class="hljs-attr">String</span> <span class="hljs-string">concatenation: +</span><br>    <span class="hljs-attr">Literal</span> <span class="hljs-string">substitutions: |The name is $&#123;name&#125;|</span><br><span class="hljs-attr">Arithmetic</span> <span class="hljs-string">operations:（数学运算）</span><br>    <span class="hljs-attr">Binary</span> <span class="hljs-string">operators: + , - , * , / , %</span><br>    <span class="hljs-attr">Minus</span> <span class="hljs-string">sign (unary operator): -</span><br><span class="hljs-attr">Boolean</span> <span class="hljs-string">operations:（布尔运算）</span><br>    <span class="hljs-attr">Binary</span> <span class="hljs-string">operators: and , or</span><br>    <span class="hljs-attr">Boolean</span> <span class="hljs-string">negation (unary operator): ! , not</span><br><span class="hljs-attr">Comparisons</span> <span class="hljs-string">and equality:（比较运算）</span><br>    <span class="hljs-attr">Comparators</span>: <span class="hljs-string">&gt; , &lt; , &gt;= , &lt;= ( gt , lt , ge , le )</span><br>    <span class="hljs-attr">Equality</span> <span class="hljs-string">operators: == , != ( eq , ne )</span><br><span class="hljs-attr">Conditional</span> <span class="hljs-string">operators:条件运算（三元运算符）</span><br>    <span class="hljs-attr">If-then</span>: <span class="hljs-string">(if) ? (then)</span><br>    <span class="hljs-attr">If-then-else</span>: <span class="hljs-string">(if) ? (then) : (else)</span><br>    <span class="hljs-attr">Default</span>: <span class="hljs-string">(value) ?: (defaultvalue)</span><br><span class="hljs-attr">Special</span> <span class="hljs-string">tokens:</span><br>    <span class="hljs-attr">No-Operation</span>: <span class="hljs-string">_ </span><br></code></pre></td></tr></table></figure>

<h2 id="4-4-SpringMVC的自动配置"><a href="#4-4-SpringMVC的自动配置" class="headerlink" title="4.4 SpringMVC的自动配置"></a>4.4 SpringMVC的自动配置</h2><p><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/1.5.10.RELEASE/reference/htmlsingle/#boot-features-developing-web-applications">1.5.9的springbootMVC文档地址</a></p>
<h3 id="4-4-1-SpringMVC自动配置"><a href="#4-4-1-SpringMVC自动配置" class="headerlink" title="4.4.1 SpringMVC自动配置"></a>4.4.1 SpringMVC自动配置</h3><p>Spring Boot 自动配置好了SpringMVC</p>
<p>以下是SpringBoot对SpringMVC的默认配置:（WebMvcAutoConfiguration）</p>
<ul>
<li>Inclusion of ContentNegotiatingViewResolver and BeanNameViewResolver beans.<ul>
<li>自动配置了ViewResolver（视图解析器：根据方法的返回值得到视图对象（View），视图对象决定如何渲染（转发？重定向？））</li>
<li>ContentNegotiatingViewResolver：组合所有的视图解析器的；</li>
<li>如何定制：我们可以自己给容器中添加一个视图解析器；自动的将其组合进来；</li>
</ul>
</li>
<li>Support for serving static resources, including support for WebJars (see below).<ul>
<li>静态资源文件夹路径,webjars</li>
</ul>
</li>
<li>Static index.html support.<ul>
<li>静态首页访问</li>
</ul>
</li>
<li>Custom Favicon support (see below). <ul>
<li>图标定义 favicon.ico</li>
</ul>
</li>
<li>自动注册了 of Converter, GenericConverter, Formatter beans.<ul>
<li>Converter：转换器； public String hello(User user)：类型转换使用Converter   </li>
<li>Formatter 格式化器； 2017.12.17&#x3D;&#x3D;&#x3D;Date；</li>
</ul>
</li>
</ul>
<p>自己添加的格式化器转换器，我们只需要放在容器中即可</p>
<ul>
<li>Support for HttpMessageConverters (see below).<ul>
<li>HttpMessageConverter：SpringMVC用来转换Http请求和响应的；User—Json；</li>
<li>HttpMessageConverters 是从容器中确定；获取所有的HttpMessageConverter；<ul>
<li>自己给容器中添加HttpMessageConverter，只需要将自己的组件注册容器中（@Bean,@Component</li>
</ul>
</li>
</ul>
</li>
<li>Automatic registration of MessageCodesResolver (see below).定义错误代码生成规则</li>
<li>Automatic use of a ConfigurableWebBindingInitializer bean (see below).</li>
<li>我们可以配置一个ConfigurableWebBindingInitializer来替换默认的；（添加到容器）<ul>
<li>初始化WebDataBinder；</li>
<li>请求数据&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;JavaBean；</li>
</ul>
</li>
<li>org.springframework.boot.autoconfigure.web：web的所有自动场景；<blockquote>
<p>If you want to <strong>keep Spring Boot MVC features</strong>, and you <strong>just want to add additional MVC configuration</strong> (<code>interceptors, formatters, view controllers</code> etc.) you can <strong>add your own <code>@Configuration</code> class of type <code>WebMvcConfigurerAdapter</code>, but without <code>@EnableWebMvc</code></strong>.<br>If you want to <strong>take complete control of Spring MVC</strong>, you can add your own <code>@Configuration </code>annotated <strong>with @EnableWebMvc.</strong><br>If you wish to provide custom instances of <code>RequestMappingHandlerMapping</code>，<code>RequestMappingHandlerAdapter</code> or <code>ExceptionHandlerExceptionResolver</code> you can declare a <code>WebMvcRegistrationsAdapter</code> instance providing such components.</p>
</blockquote>
</li>
</ul>
<h3 id="4-4-2-扩展SpringMVC"><a href="#4-4-2-扩展SpringMVC" class="headerlink" title="4.4.2 扩展SpringMVC"></a>4.4.2 扩展SpringMVC</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mvc:view-controller</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/hello&quot;</span> <span class="hljs-attr">view-name</span>=<span class="hljs-string">&quot;success&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:interceptors</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mvc:interceptor</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">mvc:mapping</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/hello&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">bean</span>&gt;</span>some.Bean<span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">mvc:interceptor</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mvc:interceptors</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p>这是传统的springmvc的配置片段，配置了一个对hello的映射，同时为它指定一个拦截器some.Bean。</p>
<p>springboot中，用这段代码实现这些功能</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//使用WebMvcConfigurerAdapter可以来扩展SpringMVC的功能</span><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyMvcConfig</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">WebMvcConfigurerAdapter</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addViewControllers</span><span class="hljs-params">(ViewControllerRegistry registry)</span> &#123;<br>       <span class="hljs-comment">// super.addViewControllers(registry);</span><br>        <span class="hljs-comment">//浏览器发送 /atguigu 请求来到 success</span><br>        registry.addViewController(<span class="hljs-string">&quot;/atguigu&quot;</span>).setViewName(<span class="hljs-string">&quot;success&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>如果只是像扩展MVC功能，只需要编写一个继承自<code>WebMvcConfigurerAdapter</code>类，同时加上<code>@Configuration</code>注解即可。</p>
<h3 id="4-4-3-第一个页面的映射，login"><a href="#4-4-3-第一个页面的映射，login" class="headerlink" title="4.4.3 第一个页面的映射，login"></a>4.4.3 第一个页面的映射，login</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 映射/和index.html</span><br><span class="hljs-meta">@RequestMapping(&#123;&quot;/&quot;,&quot;/index.html&quot;&#125;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">index</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">// 返回login，springboot在字符串后拼接.html</span><br>    <span class="hljs-comment">// 然后在template文件夹中查找同名文件并进行试图映射</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;login&quot;</span>;<br>&#125;<br><br><br></code></pre></td></tr></table></figure>
<h4 id="4-4-3-1使用WebMvcConfigurerAdapter进行简单映射"><a href="#4-4-3-1使用WebMvcConfigurerAdapter进行简单映射" class="headerlink" title="4.4.3.1使用WebMvcConfigurerAdapter进行简单映射"></a>4.4.3.1使用WebMvcConfigurerAdapter进行简单映射</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyMvcConfig</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">WebMvcConfigurerAdapter</span> &#123;<br>    <span class="hljs-comment">/*视图控制器*/</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addViewControllers</span><span class="hljs-params">(ViewControllerRegistry registry)</span> &#123;<br>       <span class="hljs-built_in">super</span>.addViewControllers(registry);<br>       registry.addViewController(<span class="hljs-string">&quot;/index.html&quot;</span>).setViewName(<span class="hljs-string">&quot;login&quot;</span>);<br>       registry.addViewController(<span class="hljs-string">&quot;/&quot;</span>).setViewName(<span class="hljs-string">&quot;login&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// adapter的内部类也可以完成映射</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> WebMvcConfigurerAdapter <span class="hljs-title function_">webMvcConfigurerAdapter</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">WebMvcConfigurerAdapter</span> <span class="hljs-variable">adapter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebMvcConfigurerAdapter</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addViewControllers</span><span class="hljs-params">(ViewControllerRegistry registry)</span> &#123;<br>                registry.addViewController(<span class="hljs-string">&quot;/index.html&quot;</span>).setViewName(<span class="hljs-string">&quot;login&quot;</span>);<br>                registry.addViewController(<span class="hljs-string">&quot;/&quot;</span>).setViewName(<span class="hljs-string">&quot;login&quot;</span>);<br>            &#125;<br>        &#125;;<br>        <span class="hljs-keyword">return</span> adapter;<br>    &#125;<br></code></pre></td></tr></table></figure>

<h3 id="4-4-4-国际化"><a href="#4-4-4-国际化" class="headerlink" title="4.4.4 国际化"></a>4.4.4 国际化</h3><p>国际化通过配置文件实现。<br><img src="/images/2021S4/QQ%E6%88%AA%E5%9B%BE20211220115546.png" srcset="/img/loading.gif" lazyload alt="文件结构"></p>
<p>默认情况下，springboot会读取名为<code>message.properties</code>文件中的国际化信息。所以我们需要在<strong>配置文件</strong>中手动改一下，<code>spring.messages.basename=i18n/login</code>指定我们的国际化文件位置。</p>
<p>目前idea更改全局项目设置的路径在<code>New Project Setup -&gt; Setting For New Project</code>中，因为要想properties中写中文字符，为了避免乱码，要切换到utf-8。</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment"># login_en_US.properties 英文对应文件</span><br><span class="hljs-attr">login.prompt</span>=<span class="hljs-string">Please sign in</span><br><span class="hljs-attr">login.username</span>=<span class="hljs-string">User name</span><br><span class="hljs-attr">login.password</span>=<span class="hljs-string">Password</span><br><span class="hljs-attr">login.remember</span>=<span class="hljs-string">Remember Me</span><br><span class="hljs-attr">login.bt</span> = <span class="hljs-string">Sign in</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># login_zh_CN.properties 中文对于文件</span><br><span class="hljs-attr">login.prompt</span>=<span class="hljs-string">请登录</span><br><span class="hljs-attr">login.username</span>=<span class="hljs-string">用户名</span><br><span class="hljs-attr">login.password</span>=<span class="hljs-string">密码</span><br><span class="hljs-attr">login.remember</span>=<span class="hljs-string">记住信息</span><br><span class="hljs-attr">login.bt</span> =<span class="hljs-string">登录</span><br></code></pre></td></tr></table></figure>

<p>完成之后，使用themeleaf获取值</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 例子 --&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;h3 mb-3 font-weight-normal&quot;</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;#&#123;login.prompt&#125;&quot;</span>&gt;</span>Please sign in<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;remember-me&quot;</span>&gt;</span> [[#&#123;login.remember&#125;]]<br><span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>完成这些后，网页就会根据请求头中的位置信息自动切换语言。</p>
<h4 id="4-4-4-1-手动切换语言"><a href="#4-4-4-1-手动切换语言" class="headerlink" title="4.4.4.1 手动切换语言"></a>4.4.4.1 手动切换语言</h4><p>在页面放置两个超链接，跳到本页面并传递切换的语言信息</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-sm&quot;</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/index.html(l=&#x27;zh_CN&#x27;)&#125;&quot;</span>&gt;</span>中文<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-sm&quot;</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/index.html(l=&#x27;en_US&#x27;)&#125;&quot;</span>&gt;</span>English<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>创建一个实现了<code>LocaleResovler</code>的类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyLocaleResolver</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">LocaleResolver</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span>  Locale <span class="hljs-title function_">resolveLocale</span><span class="hljs-params">(HttpServletRequest httpServletRequest)</span> &#123;<br>        <span class="hljs-comment">/*从请求中获取要显示的语言*/</span><br>       <span class="hljs-type">String</span> <span class="hljs-variable">l</span> <span class="hljs-operator">=</span> httpServletRequest.getParameter(<span class="hljs-string">&quot;l&quot;</span>);<br>        <span class="hljs-comment">//    获取默认locale对象</span><br>       <span class="hljs-type">Locale</span> <span class="hljs-variable">locale</span> <span class="hljs-operator">=</span> Locale.getDefault();<br>       <span class="hljs-keyword">if</span>(StringUtils.hasLength(l))&#123;<br>           logger.info(l);<br>           String[] ls = l.split(<span class="hljs-string">&quot;_&quot;</span>);<br>           locale = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Locale</span>(ls[<span class="hljs-number">0</span>],ls[<span class="hljs-number">1</span>]);<br>       &#125;<br>       <span class="hljs-keyword">return</span> locale;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>最后把locale注册到MyMvcConfig类中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br>   <span class="hljs-keyword">public</span> LocaleResolver <span class="hljs-title function_">localeResolver</span><span class="hljs-params">()</span>&#123;<br>       <span class="hljs-comment">// 如果没有注册，springboot使用自己的，如果我们自己注册了，springboot就会使用我们的。</span><br>       <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyLocaleResolver</span>();<br>   &#125;<br></code></pre></td></tr></table></figure>

<h3 id="4-4-5访问控制"><a href="#4-4-5访问控制" class="headerlink" title="4.4.5访问控制"></a>4.4.5访问控制</h3><ol>
<li>使用<code>th:action=&quot;@&#123;/user/login&#125;&quot;</code>发送登录请求</li>
<li>控制器处理映射<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@PostMapping(value = &quot;/user/login&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">login</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam(&quot;username&quot;)</span> String username,</span><br><span class="hljs-params">                        <span class="hljs-meta">@RequestParam(&quot;password&quot;)</span> String password,</span><br><span class="hljs-params">                        Map&lt;String,Object&gt; map, HttpSession session)</span>&#123;<br>        <span class="hljs-comment">/*带有RequestParam的参数没有被接收到， 就会报错  xxx not present */</span><br>        <span class="hljs-keyword">if</span>(StringUtils.hasLength(username) &amp;&amp; <span class="hljs-string">&quot;aaaaaa&quot;</span>.equals(password))&#123;<br>            <span class="hljs-comment">/* 登陆成功存值到session */</span><br>            session.setAttribute(<span class="hljs-string">&quot;loginUser&quot;</span>,username);<br>            <span class="hljs-comment">/* 通过重定向避免出现表单重复提交的问题</span><br><span class="hljs-comment">            重定向到一个不存在main.html</span><br><span class="hljs-comment">            然后由视图控制器绑定到要跳转的页面 */</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;redirect:/main.html&quot;</span>;<br>        &#125; <span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-comment">/* 存到map的值待会用模板引擎解析 */</span><br>            map.put(<span class="hljs-string">&quot;msg&quot;</span>,<span class="hljs-string">&quot;用户名或密码错误&quot;</span>);<br>            <span class="hljs-comment">/* 未登录回到首页，这里的return是与template建立连接 */</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;login&quot;</span>;<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure></li>
<li>建立一个<code>LoginHandlerInterceptor</code>拦截器拦截未登陆访问 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java">    &lt;!-- 实现HandlerInterceptor --&gt;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginHandlerInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerInterceptor</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preHandle</span><span class="hljs-params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> httpServletRequest.getSession().getAttribute(<span class="hljs-string">&quot;loginUser&quot;</span>);<br>        <span class="hljs-keyword">if</span>(user == <span class="hljs-literal">null</span>)&#123;<br>            httpServletRequest.setAttribute(<span class="hljs-string">&quot;msg&quot;</span>,<span class="hljs-string">&quot;请先登录~&quot;</span>);<br>            <span class="hljs-comment">/* 如果未登录，跳转到登录页 */</span><br>            httpServletRequest.getRequestDispatcher(<span class="hljs-string">&quot;/index.html&quot;</span>).forward(httpServletRequest,httpServletResponse);<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li>注册拦截器，在MyMvcConfig中注册，MyMvcConfig用于定制扩展springboot<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> WebMvcConfigurerAdapter <span class="hljs-title function_">webMvcConfigurerAdapter</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">WebMvcConfigurerAdapter</span> <span class="hljs-variable">adapter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebMvcConfigurerAdapter</span>() &#123;<br>            <span class="hljs-comment">// 视图映射器</span><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addViewControllers</span><span class="hljs-params">(ViewControllerRegistry registry)</span> &#123;<br>                registry.addViewController(<span class="hljs-string">&quot;/index.html&quot;</span>).setViewName(<span class="hljs-string">&quot;login&quot;</span>);<br>                registry.addViewController(<span class="hljs-string">&quot;/&quot;</span>).setViewName(<span class="hljs-string">&quot;login&quot;</span>);<br>                registry.addViewController(<span class="hljs-string">&quot;/main.html&quot;</span>).setViewName(<span class="hljs-string">&quot;dashboard&quot;</span>);<br>            &#125;<br><br>            <span class="hljs-comment">/*注册拦截器*/</span><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addInterceptors</span><span class="hljs-params">(InterceptorRegistry registry)</span> &#123;<br>                registry.addInterceptor(<span class="hljs-keyword">new</span> <span class="hljs-title class_">LoginHandlerInterceptor</span>()).addPathPatterns(<span class="hljs-string">&quot;/**&quot;</span>)<br>                        .excludePathPatterns(<span class="hljs-string">&quot;/index.html&quot;</span>,<span class="hljs-string">&quot;/&quot;</span>,<span class="hljs-string">&quot;/user/login&quot;</span>);<br>            &#125;<br>        &#125;;<br>        <span class="hljs-keyword">return</span> adapter;<br>    &#125;<br></code></pre></td></tr></table></figure></li>
</ol>
<h4 id="4-4-5-1关于热部署"><a href="#4-4-5-1关于热部署" class="headerlink" title="4.4.5.1关于热部署"></a>4.4.5.1关于热部署</h4><p>两个前提</p>
<ol>
<li>是在debug模式下</li>
<li>禁用模板引擎的缓存(使静态页面生效),<code>spring.thymeleaf.cache=false</code></li>
</ol>
<h3 id="4-4-6-员工列表模拟Restful"><a href="#4-4-6-员工列表模拟Restful" class="headerlink" title="4.4.6 员工列表模拟Restful"></a>4.4.6 员工列表模拟Restful</h3><ol>
<li><p>对应的uri：<br> URI：  &#x2F;资源名称&#x2F;资源标识       HTTP请求方式区分对资源CRUD操作</p>
<table>
<thead>
<tr>
<th></th>
<th>普通CRUD（uri来区分操作）</th>
<th>RestfulCRUD</th>
</tr>
</thead>
<tbody><tr>
<td>查询</td>
<td>getEmp</td>
<td>emp—GET</td>
</tr>
<tr>
<td>添加</td>
<td>addEmp?xxx</td>
<td>emp—POST</td>
</tr>
<tr>
<td>修改</td>
<td>updateEmp?id&#x3D;xxx&amp;xxx&#x3D;xx</td>
<td>emp&#x2F;{id}—PUT</td>
</tr>
<tr>
<td>删除</td>
<td>deleteEmp?id&#x3D;1</td>
<td>emp&#x2F;{id}—DELETE</td>
</tr>
</tbody></table>
</li>
<li><p>请求架构</p>
<table>
<thead>
<tr>
<th>实验功能</th>
<th>请求URI</th>
<th>请求方式</th>
</tr>
</thead>
<tbody><tr>
<td>查询所有员工</td>
<td>emps</td>
<td>GET</td>
</tr>
<tr>
<td>查询某个员工(来到修改页面)</td>
<td>emp&#x2F;1</td>
<td>GET</td>
</tr>
<tr>
<td>来到添加页面</td>
<td>emp</td>
<td>GET</td>
</tr>
<tr>
<td>添加员工</td>
<td>emp</td>
<td>POST</td>
</tr>
<tr>
<td>来到修改页面（查出员工进行信息回显）</td>
<td>emp&#x2F;1</td>
<td>GET</td>
</tr>
<tr>
<td>修改员工</td>
<td>emp</td>
<td>PUT</td>
</tr>
<tr>
<td>删除员工</td>
<td>emp&#x2F;1</td>
<td>DELETE</td>
</tr>
</tbody></table>
</li>
<li><p>处理获取所有员工列表的控制器</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@GetMapping(&quot;/emp/list&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">list</span><span class="hljs-params">(Model model)</span>&#123;<br>    Collection&lt;Employee&gt; emps =  employeeDao.getAll();<br>    model.addAttribute(<span class="hljs-string">&quot;emps&quot;</span>,emps);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;emp/list&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>抽取页面公共元素的两种方式，<code>dashboard</code>是模板名称</p>
<ol>
<li><code>th:fragment=&quot;top-nav&quot;</code> 给公共元素的fragment命名，然后<code>&lt;div th:replace=&quot;dashboard :: top-nav&quot;&gt;&lt;/div&gt;</code>使用。外层的这个div会被里面的代码覆盖</li>
<li>直接在要引用的地方<code>&lt;div th:replace=&quot;dashboard :: #sidebar&quot;&gt;&lt;/div&gt;</code>使用选择器引入</li>
</ol>
</li>
</ol>
<p>–</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E5%90%8E%E7%AB%AF/" class="category-chain-item">后端</a>
  
  
    <span>></span>
    
  <a href="/categories/%E5%90%8E%E7%AB%AF/%E6%A1%86%E6%9E%B6/" class="category-chain-item">框架</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E5%90%8E%E7%AB%AF/" class="print-no-link">#后端</a>
      
        <a href="/tags/%E6%A1%86%E6%9E%B6/" class="print-no-link">#框架</a>
      
        <a href="/tags/springboot/" class="print-no-link">#springboot</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>springboot-尚硅谷</div>
      <div>https://travelerentity.github.io/2021/12/springboot-尚硅谷/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>LinYun</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2021年11月29日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/07/%E5%B1%95%E6%9C%9B%E6%9C%AA%E6%9D%A5%E5%90%A7%EF%BC%81%E2%80%94%E2%80%942022%E5%B9%B4%E4%B8%AD%E6%80%BB%E7%BB%93/" title="考试开始！——2022年中总结">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">考试开始！——2022年中总结</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/07/%E9%A3%8E%E5%B9%B3%E6%B5%AA%E9%9D%99%E7%9A%84%E6%98%A5%E5%92%8C%E5%A4%8F/" title="宁静春夏——2021年中总结">
                        <span class="hidden-mobile">宁静春夏——2021年中总结</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/tocbot@4.12.2/dist/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>

  <div id="dark" onclick="switchDarkMode()"></div>
  <!-- 自动判断切换暗黑模式 -->
  <script>
    var isNight = new Date().getHours() >= 22 || new Date().getHours() < 7; // 指定时间
    // 依次判断 系统暗黑模式 指定时间 缓存 dark
    if( matchMedia('(prefers-color-scheme: dark)').matches || isNight || localStorage.getItem('dark') === '1') {
      if(!(isNight&&localStorage.getItem('noDark') === '1')) {
        document.body.classList.add('dark');
      }
    }
    document.getElementById('dark').innerHTML = document.querySelector("body").classList.contains("dark")?"🌙":"🌞";
  </script>
</body>
</html>
